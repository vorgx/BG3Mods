// DH Shared Interrupts//

new entry "Interrupt_DH_Disrupt"
type "InterruptData"
data "DisplayName" "h5ac44fe3g42e0g4c8cga27eg209597899d82;1"
data "Description" "hf9b933c5g0dbag4776g8f4bg3d4f7ca24c5e;1"
data "Icon" "DH_Icon_Disrupt"
data "InterruptContext" "OnSpellCast"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "not HasSpellCastBlocked(context.Observer) and IsAbleToReact(context.Observer) and not Self(context.Source, context.Observer) and Enemy(context.Source, context.Observer) and IsSpell() and not Uninterruptible() and not HasStringInSpellRoll('WeaponAttack') and not AnyEntityIsItem()"
data "Roll" "TryCounterspellHigherLevel(3)"
data "Success" "Counterspell();UseSpell(OBSERVER_SOURCE,Target_DH_Disrupt_Success,true,true,true)"
data "Failure" "UseSpell(OBSERVER_SOURCE,Target_DH_Disrupt_Failure,true,true,true)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableContext" "OnStatusApplied"


// Havoc Spec Interrupts //

new entry "Interrupt_DH_ChaosStrike"
type "InterruptData"
using "Interrupt_Smite_Divine"
data "DisplayName" "hb0fecd53g99e8g43a7ga302ge0fa53269877;1"
data "Description" "hf36d4b8bg961dg4b86gb435gfedf9061e332;1"
data "DescriptionParams" "DealDamage(LevelMapValue(DH_Strikes),Fire);35%"
data "Icon" "DH_Icon_ChaosStrike"
data "Conditions" "IsAbleToReact(context.Observer) and not Item() and not IsDemonHunterStrikes() and IsMeleeAttack() and Self(context.Source,context.Observer) and HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack() and not IsCritical() and not IsKillingBlow() and not AnyEntityIsItem() and not Dead()"
data "Properties" "DealDamage(LevelMapValue(DH_Strikes),Fire);IF(SuccessRate(35)): RestoreResource(SELF,DemonicFury,20,0);ApplyStatus(DH_Condition_ChaosStrike_VFX,100,0)"
data "Cost" "DemonicFury:40"
data "Stack" "Interrupt_DH_ChaosStrike"
data "TargetEffect" "d5f54cd9-9252-4bcd-9e04-574f5744480a"
data "InterruptDefaultValue" "Enabled;Ask"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER') or IsInDemonForm()"

new entry "Interrupt_DH_ChaosStrike_Critical"
type "InterruptData"
using "Interrupt_Smite_Divine_Critical"
data "DisplayName" "h67a43dbagb6fcg4785gaad2gbb12aa3281d6;1"
data "Description" "h1adc6960ge122g447fg97f8g9a20587b9b16;1"
data "DescriptionParams" "DealDamage(LevelMapValue(DH_Strikes),Fire);35%"
data "ExtraDescription" ""
data "ExtraDescriptionParams" ""
data "Icon" "DH_Icon_ChaosStrike"
data "Conditions" "IsAbleToReact(context.Observer) and not Item() and IsMeleeAttack() and not IsDemonHunterStrikes() and Self(context.Source,context.Observer) and HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack() and IsCritical() and not IsKillingBlow() and not AnyEntityIsItem() and not Dead()"
data "Properties" "DealDamage(LevelMapValue(DH_Strikes),Fire);IF(SuccessRate(35)): RestoreResource(SELF,DemonicFury,20,0);ApplyStatus(DH_Condition_ChaosStrike_VFX,100,0)"
data "Cost" "DemonicFury:40"
data "Stack" "Interrupt_DH_ChaosStrike_Critical"
data "TargetEffect" "d5f54cd9-9252-4bcd-9e04-574f5744480a"
data "InterruptDefaultValue" "Enabled;Ask"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER') or IsInDemonForm()"


// Vengeance Spec Interrupts //
new entry "DH_Interrupt_DemonSpikes"
type "InterruptData"
data "DisplayName" "hf12838c3ge4dcg42d2gae09g36ada326e6d3;1"
data "Description" "h343a4b7fg3e1cg4befgb11dg4bc7ae45e037;1"
data "DescriptionParams" "DealDamage(LevelMapValue(DH_DemonSpikes) + DexterityModifier*2,Piercing)"
data "Icon" "DH_Icon_DemonSpikes"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Target) and not AnyEntityIsItem() and IsRerollInterruptInteresting(context.Source)"
data "Properties" "ApplyStatus(OBSERVER_OBSERVER,DH_Buff_DemonSpikes_AC,100,LevelMapValue(DH_DemonSpikes) + DexterityModifier*2);"
data "InterruptDefaultValue" "Enabled;Ask"
